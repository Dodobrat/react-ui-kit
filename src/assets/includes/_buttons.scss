@mixin btn() {
	transition: $fastTrans;
	display: inline-block;
	position: relative;
	margin: 0;
	padding: calc(#{$mdFont} * 0.6875) $mdFont;
	background-color: transparent;
	width: auto;
	border-radius: $smBorderRadius;
	font-size: $mdFont;
	font-weight: 400;
	color: $mainFont;
	overflow: hidden;
	user-select: none;
	cursor: pointer;
	line-height: 1;
	outline: none;
	text-decoration: none;
	border: none;

	& > * {
		font-size: $mdFont;
	}

	&.dui__btn--focus-ring {
		&:focus {
			box-shadow: 0 0 0 0.2rem rgba(0, 0, 0, 0.1);
		}
	}

	&.dui__btn--active {
		background: rgba(0, 0, 0, 0.175);
	}

	&:focus-visible {
		box-shadow: 0 0 0 0.2rem rgba(0, 0, 0, 0.1);
	}

	&:hover {
		transition: $fastTrans;
		background: rgba(0, 0, 0, 0.1);
	}

	@include spongy();
	&.dui__btn--still {
		@include spongy(1);
	}

	&:disabled {
		pointer-events: none;
		cursor: not-allowed;
		opacity: 0.5;
	}
}

@mixin btnRoundOption($size: $mdFont) {
	&.dui__btn--round {
		border-radius: $roundBorderRadius;
		width: calc(calc(#{$size} * 1.375) + #{$size});
		height: calc(calc(#{$size} * 1.375) + #{$size});
		padding: 0;
	}
}

@mixin btnPigmentOptions($options: $btnPigments) {
	@each $name, $color, $font in $options {
		&.dui__btn--#{$name} {
			background-color: $color;
			color: $font;
			&:hover,
			&.dui__btn--active {
				background-color: darken($color, 5%);
			}
			&.dui__btn--focus-ring {
				&:focus {
					box-shadow: 0 0 0 0.2rem rgba($color, 0.5);
				}
			}
			&:focus-visible {
				box-shadow: 0 0 0 0.2rem rgba($color, 0.5);
			}
		}
		&.dui__btn--color-#{$name} {
			color: $font;
			&.dui__btn--focus-ring {
				&:focus {
					box-shadow: 0 0 0 0.2rem rgba($color, 0.5);
				}
			}
			&:focus-visible {
				box-shadow: 0 0 0 0.2rem rgba($color, 0.5);
			}
		}
	}
}

@mixin btnGroupCornerRoudness($radius: $smBorderRadius, $dir: "horizontal") {
	border-radius: $radius;

	& > *:first-child {
		border-radius: $radius 0 0 $radius;
	}
	& > *:last-child {
		border-radius: 0 $radius $radius 0;
	}

	@if $dir == "vertical" {
		& > *:first-child {
			border-radius: $radius $radius 0 0;
		}
		& > *:last-child {
			border-radius: 0 0 $radius $radius;
		}
	}
}

a.dui__btn {
	vertical-align: bottom;
}

.dui__btn {
	@include btn();
	@include btnRoundOption();
	@each $name, $font in $btnSizes {
		&.dui__btn--#{$name} {
			font-size: $font;
			padding: calc(#{$font} * 0.75) $font;

			& > * {
				font-size: $font;
			}
			@include btnRoundOption($font);
		}
	}
	@include btnPigmentOptions();
	&.dui__btn--contrast {
		@include btnPigmentOptions($contrastBtnPigments);
	}
	&--loading {
		cursor: progress;
		opacity: 0.75;
	}
	&--flat {
		border-radius: $flatBorderRadius;
	}
	&--rounded {
		border-radius: $roundedBorderRadius;
	}
	&--wide {
		display: block;
		width: 100%;
	}
	&--no-wrap {
		white-space: nowrap;
		text-overflow: ellipsis;
	}
	&--left-align {
		text-align: left;
	}
	&-group {
		position: relative;
		display: inline-flex;
		align-items: center;
		outline: none;

		&:focus-visible {
			box-shadow: 0 0 0 0.2rem rgba(0, 0, 0, 0.1);
		}

		& > * {
			border-radius: 0;
			&:focus {
				z-index: 2;
			}
		}
		@include btnGroupCornerRoudness();
		&--wide {
			width: 100%;
			& > * {
				flex: 1;
			}
		}
		&--rounded {
			@include btnGroupCornerRoudness($roundedBorderRadius);
		}
		&--flat {
			@include btnGroupCornerRoudness($flatBorderRadius);
		}
		&--vertical {
			flex-direction: column;
			justify-content: center;
			align-items: flex-start;
			& > * {
				width: 100%;
			}
			@include btnGroupCornerRoudness($smBorderRadius, "vertical");

			&.dui__btn-group--rounded {
				@include btnGroupCornerRoudness($xlBorderRadius, "vertical");
			}
			&.dui__btn-group--flat {
				@include btnGroupCornerRoudness($flatBorderRadius, "vertical");
			}
		}
	}
}
